# Ð—Ð°Ð´Ð°Ð½ Ð¾Ñ€Ð¸ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð°Ñ†Ð¸ÐºÐ»Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð³Ñ€Ð°Ñ„ Ñ ð‘›
#  Ð²ÐµÑ€ÑˆÐ¸Ð½Ð°Ð¼Ð¸ Ð¸ ð‘š
#  Ñ€ÐµÐ±Ñ€Ð°Ð¼Ð¸. Ð¢Ð°ÐºÐ¶Ðµ Ð·Ð°Ð´Ð°Ð½Ð° Ð¿ÐµÑ€ÐµÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð²ÐµÑ€ÑˆÐ¸Ð½ Ð³Ñ€Ð°Ñ„Ð°. ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ Ð´Ð°Ð½Ð½Ð°Ñ Ð¿ÐµÑ€ÐµÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ñ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¾Ð¹.

# Ð’Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
# Ð’ Ð¿ÐµÑ€Ð²Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐµ Ð´Ð°Ð½Ñ‹ Ð´Ð²Ð° Ñ‡Ð¸ÑÐ»Ð° ð‘›
#  Ð¸ ð‘š
#  â€” ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð²ÐµÑ€ÑˆÐ¸Ð½ Ð¸ Ñ€ÐµÐ±ÐµÑ€ Ð² Ð³Ñ€Ð°Ñ„Ðµ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾ (1â‰¤ð‘›,ð‘šâ‰¤105
# ). Ð’ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ñ… ð‘šÑÑ‚Ñ€Ð¾ÐºÐ°Ñ… Ð·Ð°Ð´Ð°Ð½Ñ‹ Ð¿Ð°Ñ€Ñ‹ Ñ‡Ð¸ÑÐµÐ» ð‘¢ð‘–,ð‘£ð‘–, Ð¾Ð·Ð½Ð°Ñ‡Ð°ÑŽÑ‰Ð¸Ðµ, Ñ‡Ñ‚Ð¾ Ð² Ð³Ñ€Ð°Ñ„Ðµ ÐµÑÑ‚ÑŒ Ñ€ÐµÐ±Ñ€Ð¾ Ð¸Ð· Ð²ÐµÑ€ÑˆÐ¸Ð½Ñ‹ ð‘¢ð‘– Ð² Ð²ÐµÑ€ÑˆÐ¸Ð½Ñƒ ð‘£ð‘– .
# Ð’ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ ÑÑ‚Ñ€Ð¾ÐºÐµ Ð·Ð°Ð´Ð°Ð½Ð° Ð¿ÐµÑ€ÐµÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¸Ð· ð‘› ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð².

# Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
# Ð’Ñ‹Ð²ÐµÐ´Ð¸Ñ‚Ðµ "YES" (Ð±ÐµÐ· ÐºÐ°Ð²Ñ‹Ñ‡ÐµÐº), ÐµÑÐ»Ð¸ Ð´Ð°Ð½Ð½Ð°Ñ Ð¿ÐµÑ€ÐµÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ñ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¾Ð¹ Ð¸ "NO" Ð² Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð½Ð¾Ð¼ ÑÐ»ÑƒÑ‡Ð°Ðµ.

n, m = map(int, input().split())
graph = {i: [] for i in range(1, n + 1)}
for _ in range(m):
    u, v = map(int, input().split())
    graph[u].append(v)

swap = list(map(int, input().split()))

position = [0] * (n + 1)
for idx, vertex in enumerate(swap):
    position[vertex] = idx

ans = "YES"
for u in range(1, n + 1):
    for v in graph[u]:
        if position[u] >= position[v]:
            ans = "NO"
            break
    if ans == "NO":
        break

print(ans)
